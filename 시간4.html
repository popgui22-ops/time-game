<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì‹œê°„ êµ¬í•˜ê¸° ê²Œì„</title>
<style>
    /* ë””ìì¸ ì„¤ì • */
    body { font-family: 'Verdana', sans-serif; background-color: #f0f9ff; text-align: center; margin: 0; padding: 20px; }
    .container { max-width: 500px; margin: 0 auto; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    h1 { color: #ff6b6b; margin-bottom: 10px; }
    
    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    button { font-family: 'Verdana', sans-serif; cursor: pointer; }
    .stage-btn { width: 100%; padding: 15px; margin: 5px 0; border: none; border-radius: 10px; font-size: 18px; color: white; font-weight: bold; }
    .stage-1 { background: #4ecdc4; }
    .stage-2 { background: #45b7d1; }
    .stage-3 { background: #ffae62; }
    .stage-4 { background: #ff6b6b; }
    .stage-5 { background: #c44569; }

    /* ì‹œê³„ ìŠ¤íƒ€ì¼ */
    .clocks-area { display: flex; justify-content: space-around; margin: 20px 0; }
    .clock-box { text-align: center; }
    .clock { width: 100px; height: 100px; border: 5px solid #333; border-radius: 50%; position: relative; background: white; margin: 0 auto; }
    .dot { width: 10px; height: 10px; background: red; border-radius: 50%; position: absolute; top: 45px; left: 45px; z-index: 10; }
    .hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom center; border-radius: 5px; }
    .hour { width: 6px; height: 30px; background: #333; z-index: 5; }
    .min { width: 4px; height: 40px; background: red; z-index: 6; }

    /* ë³´ê¸° ë²„íŠ¼ */
    .options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .opt-btn { padding: 15px; background: #e0f7fa; border: 2px solid #b2ebf2; border-radius: 10px; font-size: 18px; color: #006064; }
    .opt-btn:hover { background: #b2ebf2; }
    
    /* í™”ë©´ ì „í™˜ìš© */
    .hidden { display: none; }
    #feedback { font-size: 20px; font-weight: bold; margin: 15px 0; min-height: 30px; }
    .correct { color: green; }
    .wrong { color: red; }
</style>
</head>
<body>

<div class="container">
    <h1>â° ì‹œê°„ êµ¬í•˜ê¸°</h1>

    <div id="menu-screen">
        <p>ë‹¨ê³„ë¥¼ ì„ íƒí•˜ì„¸ìš”!</p>
        <button class="stage-btn stage-1" onclick="startGame(1)">1ë‹¨ê³„ (ì‰¬ì›€)</button>
        <button class="stage-btn stage-2" onclick="startGame(2)">2ë‹¨ê³„ (ë³´í†µ)</button>
        <button class="stage-btn stage-3" onclick="startGame(3)">3ë‹¨ê³„ (ë„ì „)</button>
        <button class="stage-btn stage-4" onclick="startGame(4)">4ë‹¨ê³„ (ì–´ë ¤ì›€)</button>
        <button class="stage-btn stage-5" onclick="startGame(5)">5ë‹¨ê³„ (ì™•)</button>
    </div>

    <div id="game-screen" class="hidden">
        <div style="display:flex; justify-content:space-between; font-weight:bold; color:#555;">
            <span id="stage-txt">1ë‹¨ê³„</span>
            <span>ì ìˆ˜: <span id="score">0</span></span>
        </div>
        
        <div style="background:#fff9db; padding:10px; border-radius:10px; margin-top:10px;">
            <div id="q-text" style="font-size:18px; font-weight:bold;"></div>
            <div class="clocks-area">
                <div class="clock-box">
                    <div>ì‹œì‘</div>
                    <div class="clock"><div class="dot"></div><div id="sh" class="hand hour"></div><div id="sm" class="hand min"></div></div>
                    <div id="st-txt"></div>
                </div>
                <div class="clock-box">
                    <div>ë</div>
                    <div class="clock"><div class="dot"></div><div id="eh" class="hand hour"></div><div id="em" class="hand min"></div></div>
                    <div id="et-txt"></div>
                </div>
            </div>
        </div>

        <div id="feedback"></div>
        <div id="options" class="options"></div>
        <button onclick="goHome()" style="margin-top:20px; padding:10px; background:#ccc; border:none; border-radius:5px;">ë©”ë‰´ë¡œ ë‚˜ê°€ê¸°</button>
    </div>

    <div id="end-screen" class="hidden">
        <h2 style="color:#2e86de;">ğŸ‰ ë‹¨ê³„ í´ë¦¬ì–´! ğŸ‰</h2>
        <p id="end-msg"></p>
        <button class="stage-btn stage-1" onclick="goHome()">ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>
</div>

<script>
    // ì„¤ì •
    const qsPerStage = 5; 
    const easyMins = [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55]; // 5ë¶„ ë‹¨ìœ„

    // ë³€ìˆ˜
    let stage = 1, qCount = 0, score = 0, ans = "";

    // í™”ë©´ ì „í™˜ í•¨ìˆ˜
    function show(id) {
        ['menu-screen', 'game-screen', 'end-screen'].forEach(s => document.getElementById(s).classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function goHome() { show('menu-screen'); }

    function startGame(s) {
        stage = s; qCount = 0; score = 0;
        document.getElementById('stage-txt').innerText = stage + "ë‹¨ê³„";
        document.getElementById('score').innerText = "0";
        show('game-screen');
        nextQ();
    }

    // ìœ í‹¸ë¦¬í‹°
    function rand(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
    function randMin() { return easyMins[rand(0, easyMins.length - 1)]; }
    function fmt(h, m) {
        let p = h >= 12 ? "ì˜¤í›„" : "ì˜¤ì „";
        if (h >= 24) p = "ë‹¤ìŒë‚  ìƒˆë²½"; else if (h < 6) p = "ìƒˆë²½"; else if (h >= 22) p = "ë°¤";
        let dh = h % 12 || 12;
        return `${p} ${dh}ì‹œ ${m.toString().padStart(2,'0')}ë¶„`;
    }
    function fmtDur(m) {
        let h = Math.floor(m/60), mm = m%60;
        return h > 0 && mm > 0 ? `${h}ì‹œê°„ ${mm}ë¶„` : (h > 0 ? `${h}ì‹œê°„` : `${mm}ë¶„`);
    }

    // ë¬¸ì œ ìƒì„±
    function nextQ() {
        if (qCount >= qsPerStage) {
            document.getElementById('end-msg').innerText = `ì´ ì ìˆ˜: ${score}ì `;
            show('end-screen');
            return;
        }
        
        document.getElementById('feedback').innerText = "";
        document.getElementById('options').innerHTML = "";

        // ë¬¸ì œ ë¡œì§ (5ë¶„ ë‹¨ìœ„ ìœ ì§€)
        let sH = rand(8, 11), sM = randMin(), add = 0;

        if (stage === 1) { add = 5 * rand(2, 8); if (sM + add >= 60) sM = 0; } // 1ë‹¨ê³„: ì‹œ ì•ˆ ë„˜ê¹€
        else if (stage === 2) { add = 5 * rand(4, 20); } // 2ë‹¨ê³„
        else if (stage === 3) { sH = rand(13, 18); add = 5 * rand(10, 30); } // 3ë‹¨ê³„
        else if (stage === 4) { sH = 11; add = 5 * rand(14, 36); } // 4ë‹¨ê³„ (12ì‹œ ë„˜ê¹€)
        else { sH = rand(21, 23); add = 5 * rand(24, 60); } // 5ë‹¨ê³„ (ë‚ ì§œ ë„˜ê¹€)

        let totalS = sH * 60 + sM;
        let totalE = totalS + add;
        let eH = Math.floor(totalE / 60), eM = totalE % 60;

        // ì •ë‹µ ë° ì‹œê³„ ì„¤ì •
        ans = fmtDur(add);
        
        // ì‹œê³„ ì¹¨ ëŒë¦¬ê¸°
        document.getElementById('sh').style.transform = `rotate(${(sH%12)*30 + sM*0.5}deg)`;
        document.getElementById('sm').style.transform = `rotate(${sM*6}deg)`;
        document.getElementById('st-txt').innerText = fmt(sH, sM);

        document.getElementById('eh').style.transform = `rotate(${(eH%12)*30 + eM*0.5}deg)`;
        document.getElementById('em').style.transform = `rotate(${eM*6}deg)`;
        document.getElementById('et-txt').innerText = fmt(eH, eM);

        document.getElementById('q-text').innerHTML = `<span style="color:blue">${fmt(sH, sM)}</span> ì‹œì‘,<br><span style="color:red">${fmt(eH, eM)}</span> ë!`;

        // ë³´ê¸° ë§Œë“¤ê¸°
        let opts = new Set([ans]);
        while(opts.size < 4) {
            let fake = add + (Math.random() < 0.5 ? 10 : -10); // 10ë¶„ ì°¨ì´ ì˜¤ë‹µ
            if (Math.random() < 0.3) fake = add + 60; // 1ì‹œê°„ ì°¨ì´ ì˜¤ë‹µ
            if (fake > 0 && fake !== add) opts.add(fmtDur(fake));
            else opts.add(fmtDur(add + opts.size * 5 + 5));
        }
        
        Array.from(opts).sort(() => Math.random()-0.5).forEach(o => {
            let btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = o;
            btn.onclick = () => check(o, btn);
            document.getElementById('options').appendChild(btn);
        });
    }

    function check(val, btn) {
        let f = document.getElementById('feedback');
        if (val === ans) {
            f.innerText = "ë”©ë™ëŒ•! ì •ë‹µ! â­•"; f.className = "correct"; btn.style.background = "#c8e6c9";
            score += 20; document.getElementById('score').innerText = score;
            qCount++;
            setTimeout(nextQ, 1000);
        } else {
            f.innerText = "ë•¡! ë‹¤ì‹œ í•´ë´ìš” âŒ"; f.className = "wrong"; btn.style.background = "#ffcdd2";
        }
    }
</script>

</body>
</html>